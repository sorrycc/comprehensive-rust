---
translated_at: '2024-03-26T11:21:55.165Z'
---

# 解决问题

如果你的构建失败了，可能是因为 `build.rs`：在构建时执行任意操作的程序。这与 `gn` 和 `ninja` 的设计初衷根本相悖，它们旨在实现静态、确定的构建规则，以最大化并行性和构建的可重复性。

一些 `build.rs` 的行为会被自动支持；其他的则需要采取行动：

| 构建脚本影响                                                   | 我们的 gn 模板是否支持 | 你需要做的工作                   |
| -------------------------------------------------------------- | ---------------------- | ------------------------------- |
| 检查 rustc 版本以开启或关闭特性配置                               | 是                      | 无需任何操作                     |
| 检查平台或 CPU 以开启或关闭特性配置                              | 是                      | 无需任何操作                     |
| 生成代码                                                       | 是                      | 是 - 在 `gnrt_config.toml` 中指定 |
| 构建 C/C++                                                     | 否                      | 绕开此问题                       |
| 其他任意行为                                                   | 否                      | 绕开此问题                       |

幸运的是，大多数 crate 不包含构建脚本，而且幸运的是，大多数构建脚本只执行前两个动作。

[0]: https://doc.rust-lang.org/cargo/reference/build-scripts.html
